<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <link rel="stylesheet" href="pagelogin.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Public+Sans:ital,wght@0,600;1,600&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
</head>
<body>
    <div class="kontainer">
        <div class="kembali-btn">
            <a href="beranda.php"><button><b>Kembali</b></button></a>
        </div>
    </div>
    <div class="kontainer">
        <div class="bungkus-page-login">
            <div class="logo">
                <img src="gambar/LOGOO.png" width="100px" alt="">
            </div>
            <div class="teks">
                <p>Login 360 News untuk menggunakan layanan kami</p>
            </div>
            <div class="email-password">
                <div class="email-field">
                    <input type="email" placeholder="Email">
                </div>
                <div class="password-field">
                    <input type="password" id="password" placeholder="Password">
                    <img id="togglePassword" src="gambar/hide.png" width="30px" alt="Toggle Password">
                </div>
            </div>
            <div class="login-btn">
                <button>Log in</button>
            </div>
            <div class="daftar-lupaPassword">
                <p><a href="#">Daftar?</a> Atau <a href="#">Lupa password?</a></p>
            </div>
        </div>
    </div>

    <script>
        document.querySelector('.login-btn button').addEventListener('click', function() {
            const username = document.querySelector('input[type=email]').value;
            const password = document.querySelector('#password').value;
        
            fetch('process_login.php', {
                method: 'POST',
                headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                body: `username=${username}&password=${password}`
            })
            .then(response => response.json()) // Mengubah respons menjadi JSON
            .then(data => {
                if (data.status === 'success') {
                    alert(data.message);
                    window.location.href = 'beranda.php';
                } else {
                    alert(data.message); // Menampilkan pesan error
                }
            });
        });
        </script>
        
    <script src="hide-password.js"></script>
</body>
</html>
